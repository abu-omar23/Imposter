<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Imposter ‚Äì Vollversion</title>
  <style>
  * {
    box-sizing: border-box;
  }
      /* Chrome, Safari, Edge */
  /* === Scrollbalken unsichtbar, aber Scroll erlauben === */
  ::-webkit-scrollbar { width: 0; height: 0; }
  html, body, .card, .checkboxes { scrollbar-width: none; }
  body, .card, .checkboxes { -ms-overflow-style: none; }
  
  
  /* Firefox */
  html {
    scrollbar-width: none;
  }
  
  /* Internet Explorer / alter Edge */
  body {
    -ms-overflow-style: none;
  }

  html, body {
    user-select: none;
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    height: 100%;
    background: linear-gradient(180deg, #7ec8e3 0%, #b5e2fa 50%, #e3f6ff 100%);
    overscroll-behavior: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden; /* verhindert horizontales Scrollen */
    max-width: 100vw;   /* fixiert Breite */
  }

  .card {
    background: #fff;
    border-radius: 25px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    padding: 20px 15px;    /* etwas kompakter */
    margin: 15px auto;
    width: 94%;
    max-width: 420px;
    text-align: center;
    transition: 0.3s;
    
    /* üß© Automatische H√∂he */
    height: auto;
    max-height: none;
    
    /* sorgt f√ºr Abstand zu Bildschirmrand */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
  }
  
  

  h1 {
    color: #222;
    font-size: 1.9em;
    font-weight: 700;
    margin-bottom: 15px;
  }

  h2, p {
    color: #333;
  }

  input {
    margin: 8px auto;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 1em;
    width: 90%;
    display: block;
    background: #f9f9f9;
    transition: all 0.2s ease;
  }

  input:focus {
    outline: none;
    border-color: #4CAF50;
    background: #fff;
    box-shadow: 0 0 5px #4CAF50;
  }

  button {
    margin: 4px auto;
    padding: 10px 18px;            /* kompakter, aber angenehm klickbar */
    border-radius: 15px;
    border: none;
    font-size: 1em;
    font-weight: 600;
    color: white;
    cursor: pointer;
    background: linear-gradient(90deg, #4CAF50, #45a049);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease;
    width: auto;                   /* ‚ùó Breite nur nach Textinhalt */
    min-width: 180px;              /* ‚úÖ minimale Breite f√ºr Lesbarkeit */
    text-align: center;
  }
  
  button:hover {
    transform: translateY(-2px);
    background: linear-gradient(90deg, #45a049, #3e8e41);
  }
  /* üîπ RUNDEN + / ‚àí BUTTONS IM SETUP */
  #playerControl button,
  #imposterControl button {
    all: unset;                       /* entfernt ALLE geerbten Button-Stile */
    display: flex;
    justify-content: center;
    align-items: center;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: linear-gradient(90deg, #4CAF50, #45a049);
    color: #fff;
    font-size: 1.4em;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    cursor: pointer;
    transition: transform 0.2s ease, background 0.2s ease;
    margin: 0 5px;
  }
  
  #playerControl button:hover,
  #imposterControl button:hover {
    transform: translateY(-2px);
    background: linear-gradient(90deg, #45a049, #3e8e41);
  }
    /* üîπ Setup-Buttons: breite, mittige Buttons im Startmen√º */
  .setup-btn {
    display: inline-block;
    padding: 10px 18px;         /* üîπ etwas kompakter, Textbasiert */
    margin: 8px auto;
    text-align: center;
    border-radius: 15px;
    border: none;
    font-size: 1em;
    font-weight: 600;
    color: white;
    cursor: pointer;
    background: linear-gradient(90deg, #4CAF50, #45a049);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease;
    width: auto;                /* üîπ Breite passt sich Text an */
    min-width: 160px;           /* üîπ bleibt nicht zu schmal */
  }
  
  .setup-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(90deg, #45a049, #3e8e41);
  }

  #playerControl {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin: 15px 0;
  }

  #playerControl button {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    font-size: 1.4em;
    background: linear-gradient(90deg, #4CAF50, #45a049);
  }

  #playerCountDisplay {
    font-weight: bold;
    font-size: 1.4em;
    color: #222;
  }
  #imposterControl {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin: 15px 0;
  }

  #imposterControl button {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    font-size: 1.4em;
    background: linear-gradient(90deg, #4CAF50, #45a049);
    border: none;
    color: white;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
  }
  
  #imposterCountDisplay {
    font-weight: bold;
    font-size: 1.4em;
    color: #222;
  }

  #backToSetupBtn {
    background: #888;
    width: 80%;
    margin-top: 10px;
    display: none; /* <‚Äî NEU: unsichtbar zu Beginn */

  }
  
  #backToSetupBtn:hover {
    background: #666;
  }

  .score-reset-btn {
    background: #888;
    color: #fff;
    border: none;
    border-radius: 15px;
    padding: 10px 20px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    margin: 12px auto 0;
    display: block;
    width: 80%;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease;
  }

  .score-reset-btn:hover {
    background: #666;
    transform: translateY(-2px);
  }


/* === KOMPAKTES KATEGORIEN-MEN√ú === */
#categoryList {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 400px;
  background: rgba(255, 255, 255, 0.97);
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  padding: 20px 15px;
  display: none;
  flex-direction: column;
  align-items: center;
  z-index: 1000;
}

#categoryList.visible {
  display: flex;
  animation: fadeIn 0.25s ease;
}

.category-buttons {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 15px;
  width: 100%;
}

.category-buttons .setup-btn {
  flex: 1;
  padding: 10px 0;
  font-size: 0.9em;
  font-weight: 600;
}

/* Jede Kategorie-Zeile */
.checkboxes label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  margin: 4px 0;
  background: #f9fafb;
  border-radius: 8px;
  font-weight: 500;
  color: #222;
  transition: background 0.2s ease;
}

.checkboxes label:hover {
  background: #eef9f0;
}

/* Text soll links ganz b√ºndig */
.checkboxes label span {
  flex: 1;
  text-align: left;
}

/* Kleiner, perfekt zentrierter Switch */
.checkboxes input[type="checkbox"] {
  appearance: none;
  position: relative;
  width: 36px;
  height: 20px;
  background: #ccc;
  border-radius: 20px;
  outline: none;
  cursor: pointer;
  transition: background 0.3s ease;
  flex-shrink: 0;
  margin-left: 10px;
}

.checkboxes input[type="checkbox"]::before {
  content: "";
  position: absolute;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  background: white;
  transition: transform 0.3s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Aktiviert */
.checkboxes input[type="checkbox"]:checked {
  background: #4CAF50;
}

.checkboxes input[type="checkbox"]:checked::before {
  transform: translateX(16px);
}

/* Buttons "Alle ausw√§hlen / abw√§hlen" im Men√º */
.category-buttons {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.category-btn {
  flex: 1;
  padding: 7px 0;
  border: none;
  border-radius: 8px;
  font-size: 0.85em;
  font-weight: 600;
  color: white;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.category-btn:hover {
  transform: translateY(-2px);
  opacity: 0.9;
}

.category-btn.green {
  background: linear-gradient(90deg, #4CAF50, #45a049);
}

.category-btn.red {
  background: linear-gradient(90deg, #e53935, #d32f2f);
}
  #game {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 4px;                      /* üîπ minimaler Abstand zwischen Elementen */
    width: 85vw;                   /* üîπ schmaler als vorher */
    max-width: 360px;              /* üîπ begrenzt auf Handygr√∂√üe */
    margin: 10px auto;
    padding: 10px 8px;             /* üîπ kaum Innenabstand */
    background: #ffffff;
    border-radius: 22px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    height: auto;
  }

  
  /* Haupt-Container f√ºr die Karten */
  #cardContainer {
    position: relative;
    width: 100%;
    height: 210px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 4px 0 40px 0; /* üîπ deutlich mehr Abstand nach unten */
  }
  
  
  /* Wort-Karte (unten) */
  #wordCard {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    height: 100%;
    border-radius: 18px;
    background: #1e1e1e;
    color: #f5f5f5;
    z-index: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 1.2em;   /* üîπ gr√∂√üerer Text f√ºr normales Wort */
    font-weight: 600;
    padding: 15px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
  }
  
  /* Swipe-Karte (oben) */
  #swipeCard {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    height: 100%;
    border-radius: 18px;
    background: linear-gradient(135deg, #9b5de5, #f15bb5);
    color: #fff;
    z-index: 2;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 1.4em;   /* üîπ gr√∂√üerer Text f√ºr normales Wort */
    font-weight: 600;
    padding: 20px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
    transition: transform 0.3s ease;
  }





  #reveal {
    font-size: 1.2em;
    font-weight: bold;
    color: #b30000;
    margin-top: 25px;
    white-space: pre-wrap;
  }

  #timerDisplay {
    font-size: 1.1em;
    color: #222;
    margin-top: 10px;
    display: none;
  }

  #resetPointsBtn {
    background: #777;
    width: 80%;
    margin-top: 25px;
    display: none;
  }

  #resetPointsBtn:hover {
    background: #555;
  }

.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
}

.switch input { display: none; }

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #4CAF50;
}

input:checked + .slider:before {
  transform: translateX(24px);
}

#game, #setup {
  height: auto;
}

#game.card {
  background: #ffffff;
  border-radius: 25px;
  width: 92vw;
  max-width: 420px;
  margin: 40px auto;
  padding: 25px 20px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  /*max-height: 60vh;*/
  height: auto !important;
  max-height: none !important;
}


#playerName {
  font-size: 1.6em;          /* üîπ etwas gr√∂√üer */
  font-weight: 600;          /* leicht kr√§ftiger */
  margin-bottom: 18px;       /* üîπ mehr Abstand zur Swipe-Karte */
  letter-spacing: 0.5px;     /* leicht luftiger Schriftzug */
  color: #111;               /* kr√§ftigeres Schwarz f√ºr bessere Lesbarkeit */
  text-align: center;        /* sch√∂n zentriert */
}


#nextBtn {
  margin-top: 22px;   /* üîπ extra Abstand unter der Karte */
}

#startRoundBtn,
#revealImposterBtn,
#crewWinBtn,
#imposterWinBtn,
#restartBtn,
#resetPointsBtn {
  margin-top: 6px;
}

#scoreboard {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  width: 90vw;
  max-width: 420px;
  margin: 20px auto;
  padding: 20px;
  background: #fff;
  border-radius: 25px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  text-align: center;
}

#scoreList {
  width: 100%;
  text-align: left;
  font-size: 1.05em;
  line-height: 1.8em;
  margin-top: 10px;
  background: #f7fbfd;
  padding: 10px 15px;
  border-radius: 12px;
  border: 1px solid #ddd;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
}

#scoreList p {
  margin: 4px 0;
  display: flex;
  justify-content: space-between;
  font-weight: 500;
}
#setup {
  position: relative;
  overflow: hidden;
}

#nameInputsBox {
  position: fixed;                 /* üîπ nicht mehr im Setup-Flow */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 400px;
  background: rgba(255, 255, 255, 0.97);
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  padding: 20px 15px;
  display: none;
  flex-direction: column;
  align-items: center;
  z-index: 1000;                   /* h√∂her als alles andere */
}

#nameInputsBox.visible {
  display: flex;
  animation: fadeIn 0.25s ease;
}

#categoryList {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 400px;
  background: rgba(255, 255, 255, 0.97);
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  padding: 20px 15px;
  display: none;
  flex-direction: column;
  align-items: center;
  z-index: 1000;
}

#categoryList.visible {
  display: flex;
  animation: fadeIn 0.25s ease;
}

/* Sch√∂ne Einblendung */
@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -45%); }
  to   { opacity: 1; transform: translate(-50%, -50%); }
}

/* Hintergrund abdunkeln, wenn Men√º aktiv */
#setup::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.25);
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  border-radius: 25px;
}

#setup.menu-open::before {
  opacity: 1;
  pointer-events: auto;
}    
</style>


  
</head>
<body>
  <!-- üß© Setup-Men√º -->
  <div class="card" id="setup">
    <h1>Imposter Wortspiel üïµÔ∏è‚Äç‚ôÇÔ∏è</h1>
    <!-- üìö Kategorien-Men√º -->
    <button class="setup-btn" onclick="toggleCategoryMenu()">üìö Kategorien √§ndern</button>
    
    <div class="checkboxes" id="categoryList">
      <div id="categoryContent" style="width:100%;display:flex;flex-direction:column;align-items:center;">
        <div class="category-buttons">
          <button class="setup-btn" type="button" onclick="selectAllCategories(true)">‚úÖ Alle ausw√§hlen</button>
          <button class="setup-btn" type="button" onclick="selectAllCategories(false)" style="background:#e53935;">‚ùå Alle abw√§hlen</button>
        </div>
        <!-- Checkboxen werden dynamisch eingef√ºgt -->
      </div>
      <button class="setup-btn" style="margin-top:10px;background:#888;" onclick="toggleCategoryMenu()">‚¨ÖÔ∏è Zur√ºck</button>
    </div>
    
    <!-- üîπ Hinweise-Schalter nach oben verschoben -->
    <p>Hinweise anzeigen?</p>
    <label class="switch">
      <input type="checkbox" id="hintSwitch" checked>
      <span class="slider"></span>
    </label>
    
    <p>Wie viele Spieler?</p>
    <div id="playerControl">
      <button onclick="changePlayerCount(-1)">‚àí</button>
      <span id="playerCountDisplay">4</span>
      <button onclick="changePlayerCount(1)">+</button>
    </div>

    <p>Wie viele Imposter?</p>
    <div id="imposterControl" class="controlRow">
      <button onclick="changeImposterCount(-1)">‚àí</button>
      <span id="imposterCountDisplay">1</span>
      <button onclick="changeImposterCount(1)">+</button>
    </div>

  
  <!-- üßç Spielernamen-Men√º -->
  <button class="setup-btn" onclick="toggleNames()">üßç Mitspieler</button>
  <div class="checkboxes" id="nameInputsBox">
    <div id="nameInputs" style="text-align:center;"></div>
    <button class="setup-btn" style="margin-top:10px;background:#888;" onclick="toggleNames()">‚¨ÖÔ∏è Zur√ºck</button>
  </div>
  
  <!-- üéÆ Spiel starten -->
  <button id="startGameBtn" class="setup-btn" onclick="startGame()">üöÄ Spiel starten</button>
  
  <!-- üìä Punktestand -->
  <button onclick="showScoreboard()">üìä Punktestand anzeigen</button>
  </div>
  
  <!-- üèÜ Punktestand-Seite -->
  <div class="card" id="scoreboard" style="display:none">
    <h1>üèÜ Punktestand</h1>
    <div id="scoreList"></div>
    <button onclick="goBackToSetup()">‚¨ÖÔ∏è Zur√ºck</button>
  </div>


  <div class="card" id="game" style="display:none">
    <h2 id="playerName"></h2>

    <div id="cardContainer">
      <div id="wordCard">üóùÔ∏è Wort anzeigen...</div>
      <div id="swipeCard">üîí Wische nach oben üëÜ</div>
    </div>

    <p id="statusText"></p>
    <p id="timerDisplay">‚è±Ô∏è Zeit: 00:00</p>


    <button id="nextBtn" onclick="nextPlayer()">‚û°Ô∏è N√§chster Spieler</button>
    <button id="startRoundBtn" onclick="showStarter()">üé≤ Runde starten</button>
    <button id="revealImposterBtn" onclick="revealImposter()">üòà Imposter aufdecken</button>
    <button id="crewWinBtn" onclick="awardPoints(false)">‚úîÔ∏è Crew gewinnt</button>
    <button id="imposterWinBtn" onclick="awardPoints(true)">üòà Imposter gewinnt</button>
    <button id="restartBtn" onclick="startNewRound()">üîÅ Neue Runde</button>

    <div id="reveal"></div>
    <button id="resetPointsBtn" onclick="resetPoints()">üóëÔ∏è Punkte l√∂schen</button>
    <button id="backToSetupBtn" onclick="goBackToSetupFromGame()">‚¨ÖÔ∏è Zur√ºck zum Setup</button>

  </div>

  <script>
    const wordPool = {
      leicht: [
    ["Ball", "Leder"], ["Haus", "Dach"], ["Auto", "Verkehr"], ["Buch", "Seiten"], ["Stuhl", "Sitzen"],
    ["Lampe", "Licht"], ["Tisch", "Essen"], ["Fenster", "Glas"], ["Brot", "Scheibe"], ["Schl√ºssel", "Schloss"],
    ["Gabel", "Besteck"], ["Tasse", "Kaffee"], ["Flasche", "Wasser"], ["Schule", "Pause"], ["Lehrer", "Tafel"],
    ["Brief", "Umschlag"], ["Hund", "Leine"], ["Katze", "Schnurren"], ["Uhr", "Zeit"], ["Garten", "Zaun"],
    ["Stra√üe", "Asphalt"], ["Bett", "Decke"], ["Kissen", "Schlaf"], ["Wasser", "Quelle"], ["Wolke", "Himmel"],
    ["Sonne", "Strahl"], ["Mond", "Nacht"], ["Stern", "Glitzer"], ["Schnee", "K√§lte"], ["Blume", "Duft"],
    ["Vogel", "Fl√ºgel"], ["T√ºr", "Klinke"], ["Kerze", "Flamme"], ["K√ºche", "Kochen"], ["Schrank", "Regal"],
    ["Radio", "Musik"], ["Computer", "Tastatur"], ["Telefon", "Klingeln"], ["Bus", "Haltestelle"], ["Geld", "M√ºnze"],
    ["Foto", "Bild"], ["Zug", "Gleis"], ["Wiese", "Gras"], ["Schuh", "Sohle"], ["Jacke", "Rei√üverschluss"],
    ["Rucksack", "Tragen"], ["Brille", "Sehen"], ["Apfel", "Obst"], ["Kerze", "Wachs"], ["Pfanne", "Kochen"]
  ],
      sport: [
    ["Fu√üball", "Rasen"], ["Basketball", "Korb"], ["Tennis", "Aufschlag"], ["Schwimmen", "Bahn"], ["Laufen", "Tempo"],
    ["Radfahren", "Pedale"], ["Boxen", "Ring"], ["Volleyball", "Netz"], ["Skifahren", "Berg"], ["Klettern", "Griff"],
    ["Reiten", "Sattel"], ["Surfen", "Welle"], ["Skaten", "Brett"], ["Golf", "Loch"], ["Handball", "Halle"],
    ["Tanzen", "Bewegung"], ["Yoga", "Ruhe"], ["Judo", "G√ºrtel"], ["Eishockey", "Puck"], ["Rudern", "Boot"],
    ["Kanu", "Paddel"], ["Fechten", "Degen"], ["Bogenschie√üen", "Ziel"], ["Tauchen", "Maske"], ["Segeln", "Wind"],
    ["Kegeln", "Bahn"], ["Wandern", "Berg"], ["Motorsport", "Helm"], ["Tischtennis", "Platte"], ["Baseball", "Schl√§ger"],
    ["Snowboard", "Winter"], ["Ringen", "Matte"], ["Ballett", "Tutu"], ["Marathon", "Ausdauer"], ["Fahrrad", "Kette"],
    ["Dart", "Pfeil"], ["Skispringen", "Schanze"], ["Eislaufen", "Kufen"], ["Triathlon", "Disziplin"], ["Boxsack", "Training"],
    ["Bowling", "Kugel"], ["Reiten", "Pferd"], ["Bergsteigen", "Seil"], ["Turnen", "Ger√§t"], ["Joggen", "Park"],
    ["Gymnastik", "Dehnung"], ["Sprint", "Start"], ["Hockey", "Schl√§ger"], ["Schwimmbrille", "Wasser"], ["Kraftsport", "Hantel"]
  ],
      schule: [
    ["Tafel", "Kreide"], ["Lehrer", "Klasse"], ["Buch", "Lesen"], ["Sch√ºler", "Pause"], ["Heft", "Blatt"],
    ["Bleistift", "Spitzer"], ["Radiergummi", "Fehler"], ["Lineal", "Messen"], ["Atlas", "Karte"], ["Chemie", "Labor"],
    ["Biologie", "Zelle"], ["Physik", "Kraft"], ["Mathe", "Zahl"], ["Deutsch", "Grammatik"], ["Englisch", "Sprache"],
    ["Kunst", "Farbe"], ["Musik", "Instrument"], ["Sport", "Halle"], ["Geschichte", "Zeit"], ["Erdkunde", "Land"],
    ["Direktor", "B√ºro"], ["Hausaufgabe", "Abgabe"], ["Klassenarbeit", "Punkte"], ["Zeugnis", "Note"], ["Schulbus", "Haltestelle"],
    ["Schulhof", "Ball"], ["Pausebrot", "Butter"], ["Rucksack", "Tragen"], ["Tafelwischer", "Schwamm"], ["Tinte", "F√ºller"],
    ["Schulweg", "Ampel"], ["Lernen", "Wissen"], ["Test", "Bewertung"], ["Arbeitsblatt", "Aufgabe"], ["Taschenrechner", "Rechnen"],
    ["Zirkel", "Kreis"], ["Aufsatz", "Text"], ["Schulbank", "Sitzen"], ["Lehrplan", "Thema"], ["Klassenraum", "Tafel"],
    ["Whiteboard", "Marker"], ["Buchseite", "Lesen"], ["Schulmappe", "Heft"], ["Pausengong", "Ton"], ["Projektor", "Bild"],
    ["Tafelbild", "Schrift"], ["Notenheft", "Bewertung"], ["Abschluss", "Feier"], ["Pr√§sentation", "Thema"], ["Experiment", "Versuch"]
  ],
      technik: [
    ["Computer", "Prozessor"], ["Handy", "Display"], ["Tablet", "Touch"], ["Fernseher", "Bildschirm"], ["Laptop", "Tastatur"],
    ["Drucker", "Papier"], ["Scanner", "Dokument"], ["Router", "Signal"], ["Kabel", "Stecker"], ["Kamera", "Linse"],
    ["Mikrofon", "Ton"], ["Kopfh√∂rer", "Musik"], ["USB", "Speicher"], ["Akku", "Ladung"], ["Monitor", "Anzeige"],
    ["Maus", "Klick"], ["Lautsprecher", "Sound"], ["Smartwatch", "Armband"], ["Konsole", "Spiele"], ["Joystick", "Steuerung"],
    ["Roboter", "Maschine"], ["Drohne", "Flug"], ["WLAN", "Verbindung"], ["Server", "Netzwerk"], ["Cloud", "Daten"],
    ["Festplatte", "Datei"], ["App", "Symbol"], ["Website", "Browser"], ["Algorithmus", "Regel"], ["Datenbank", "Information"],
    ["Prozessor", "Chip"], ["Tastatur", "Taste"], ["E-Mail", "Nachricht"], ["Sensor", "Messung"], ["Steckdose", "Strom"],
    ["Laser", "Licht"], ["Smartphone", "Nachricht"], ["Headset", "Gespr√§ch"], ["PlayStation", "Controller"], ["Switch", "Konsole"],
    ["Bildschirm", "Pixel"], ["Browser", "Surfen"], ["Netzteil", "Energie"], ["Bluetooth", "Verbindung"], ["Software", "Programm"],
    ["Hardware", "Bauteil"], ["Grafikkarte", "Bild"], ["Modem", "Signal"], ["Mikrochip", "Technik"], ["Ladeger√§t", "Kabel"]
  ],
      essen: [
    ["Apfel", "Baum"], ["Banane", "Schale"], ["K√§se", "Milch"], ["Brot", "Backofen"], ["Pizza", "Ofen"],
    ["Nudel", "So√üe"], ["Reis", "Asien"], ["Fisch", "Meer"], ["Fleisch", "Grill"], ["Salat", "Gem√ºse"],
    ["Zucker", "S√º√ü"], ["Salz", "Streuer"], ["Ei", "Pfanne"], ["Butter", "Brot"], ["Honig", "Biene"],
    ["Milch", "Kuh"], ["Wurst", "Br√∂tchen"], ["Joghurt", "Becher"], ["Kuchen", "Ofen"], ["Keks", "Knusper"],
    ["Eis", "Kalt"], ["Schokolade", "Tafel"], ["Birne", "Baum"], ["Orange", "Vitamin"], ["Zitrone", "Sauer"],
    ["Marmelade", "Frucht"], ["Suppe", "L√∂ffel"], ["Kartoffel", "Knolle"], ["Pommes", "Fritteuse"], ["Steak", "Pfanne"],
    ["Apfelmus", "L√∂ffel"], ["Pudding", "Vanille"], ["Waffel", "Teig"], ["Sahne", "Kuchen"], ["Torte", "Kerze"],
    ["Toast", "Toaster"], ["Br√∂tchen", "B√§cker"], ["Kaffee", "Bohne"], ["Tee", "Tasse"], ["Saft", "Frucht"],
    ["Wasser", "Durst"], ["Cola", "Blase"], ["Bier", "Hopfen"], ["Wein", "Traube"], ["Nuss", "Schale"],
    ["Kirsche", "Rot"], ["Pfirsich", "Flaum"], ["Erdbeere", "Sommer"], ["Melone", "Kern"], ["Ananas", "S√ºdsee"]
  ],
      berufe: [
    ["Arzt", "Patient"], ["Lehrer", "Tafel"], ["B√§cker", "Ofen"], ["Polizist", "Uniform"], ["Feuerwehrmann", "L√∂schen"],
    ["Mechaniker", "Werkstatt"], ["Elektriker", "Kabel"], ["G√§rtner", "Pflanze"], ["Koch", "Pfanne"], ["Friseur", "Schere"],
    ["Kellner", "Teller"], ["Verk√§ufer", "Kasse"], ["Bauer", "Feld"], ["Pilot", "Flugzeug"], ["Zahnarzt", "Bohrer"],
    ["Architekt", "Plan"], ["Ingenieur", "Maschine"], ["Journalist", "Artikel"], ["Fotograf", "Kamera"], ["Musiker", "Instrument"],
    ["Schauspieler", "B√ºhne"], ["Designer", "Mode"], ["Richter", "Urteil"], ["Anwalt", "Mandant"], ["Apotheker", "Medizin"],
    ["Tierarzt", "Hund"], ["Chemiker", "Labor"], ["Maurer", "Stein"], ["Schreiner", "Holz"], ["Maler", "Farbe"],
    ["Busfahrer", "Lenkrad"], ["Lokf√ºhrer", "Zug"], ["Brieftr√§ger", "Post"], ["Bibliothekar", "B√ºcher"], ["Sekret√§r", "Computer"],
    ["Florist", "Blumen"], ["Fischer", "Netz"], ["Metzger", "Fleisch"], ["Programmierer", "Code"], ["Trainer", "Sport"],
    ["S√§nger", "Mikrofon"], ["Autor", "Buch"], ["Zimmermann", "Hammer"], ["Banker", "Geld"], ["Politiker", "Rede"]
  ],
      haustier: [
    ["Hund", "Leine"], ["Katze", "Schnurren"], ["Hamster", "Rad"], ["Meerschweinchen", "Pfeifen"], ["Kaninchen", "M√∂hre"],
    ["Papagei", "Sprechen"], ["Goldfisch", "Aquarium"], ["Schildkr√∂te", "Panzer"], ["Wellensittich", "Fl√ºgel"], ["Ratte", "Schwanz"],
    ["Maus", "K√§se"], ["Pferd", "Box"], ["Ziege", "Meckern"], ["Schaf", "Wolle"], ["Esel", "Wiehern"],
    ["Huhn", "Ei"], ["Hahn", "Kamm"], ["Katze", "Krallen"], ["Hund", "Pfote"], ["Hamster", "K√§fig"],
    ["Kaninchen", "Fell"], ["Meerschweinchen", "Stroh"], ["Goldfisch", "Wasser"], ["Schildkr√∂te", "Langsamkeit"],
    ["Pferd", "Sattel"], ["Papagei", "Federn"], ["Vogel", "K√§fig"], ["Hund", "Treue"], ["Katze", "Blick"],
    ["Pferd", "M√§hne"], ["Fisch", "Flosse"], ["Reptil", "Terrarium"], ["Vogel", "Singen"], ["Hund", "Freund"],
    ["Katze", "Kratzbaum"], ["Pferd", "Reiten"], ["Hund", "Wachsamkeit"], ["Katze", "Sofa"], ["Vogel", "Flug"],
    ["Ziege", "Milch"], ["Hamster", "Backe"], ["Kaninchen", "Nase"], ["Papagei", "Schnabel"], ["Hund", "Schwanz"]
  ],
      saegetier: [
    ["Elefant", "R√ºssel"], ["L√∂we", "M√§hne"], ["Tiger", "Streifen"], ["Pferd", "Hufe"], ["Kuh", "Milch"],
    ["Affe", "Banane"], ["B√§r", "Tatze"], ["Wolf", "Rudel"], ["Fuchs", "Schwanz"], ["Schwein", "Nase"],
    ["Zebra", "Streifen"], ["Giraffe", "Hals"], ["Nashorn", "Horn"], ["K√§nguru", "Beutel"], ["Koala", "Baum"],
    ["Delfin", "Meer"], ["Wal", "Flosse"], ["Fledermaus", "Flug"], ["Panda", "Bambus"], ["Leopard", "Fleck"],
    ["Igel", "Stachel"], ["Kamel", "W√ºste"], ["Esel", "Last"], ["Schaf", "Wolle"], ["Ziege", "Berg"],
    ["Kaninchen", "Springen"], ["Reh", "Wald"], ["Hirsch", "Geweih"], ["B√ºffel", "Herde"], ["Waschb√§r", "Maske"],
    ["Otter", "Wasser"], ["Ratte", "Schwanz"], ["Dachs", "Bau"], ["Biber", "Staudamm"], ["Feldhase", "Feld"],
    ["Orang-Utan", "Wald"], ["Gorilla", "Kraft"], ["Seekuh", "Meer"], ["Walross", "Zahn"], ["Puma", "Berg"],
    ["Luchs", "Ohren"], ["Murmeltier", "Winterschlaf"], ["Faultier", "Langsamkeit"], ["Kojote", "W√ºste"], ["Antilope", "Lauf"],
    ["Wildschwein", "Jagd"], ["Nagetier", "Z√§hne"]
  ],
      hobbys: [
    ["Lesen", "Buch"], ["Malen", "Pinsel"], ["Fotografie", "Kamera"], ["Kochen", "Rezept"], ["Backen", "Teig"],
    ["G√§rtnern", "Blumen"], ["Angeln", "See"], ["Schwimmen", "Becken"], ["Wandern", "Berg"], ["Joggen", "Strecke"],
    ["Reiten", "Pferd"], ["Tanzen", "Musik"], ["Singen", "Stimme"], ["Musik", "Instrument"], ["Zeichnen", "Papier"],
    ["Modellbau", "Kleber"], ["N√§hen", "Stoff"], ["Stricken", "Wolle"], ["Basteln", "Schere"], ["Bloggen", "Text"],
    ["Spielen", "Konsole"], ["Filme", "Kino"], ["Serien", "Folgen"], ["Yoga", "Ruhe"], ["Meditation", "Stille"],
    ["Laufen", "Schuhe"], ["Sammeln", "Objekte"], ["Schreiben", "Stift"], ["Reisen", "Koffer"], ["Gitarre", "Saiten"],
    ["Klavier", "Tasten"], ["Schach", "Brett"], ["Videospiele", "Controller"], ["Fotobearbeitung", "Computer"], ["Origami", "Papier"],
    ["Camping", "Zelt"], ["Klettern", "Seil"], ["Fitness", "Hantel"], ["Tanzen", "Bewegung"], ["Musizieren", "Rhythmus"],
    ["Surfen", "Welle"], ["Basteln", "Idee"], ["Lesen", "Kapitel"], ["Wandern", "Pfad"], ["Kochen", "Pfanne"]
  ],
      natur: [
    ["Baum", "Wald"], ["Blume", "Duft"], ["Gras", "Wiese"], ["Berg", "Gipfel"], ["See", "Wasser"],
    ["Fluss", "Strom"], ["Meer", "Welle"], ["Himmel", "Wolke"], ["Wald", "Tiere"], ["Felsen", "Stein"],
    ["Sonne", "Licht"], ["Mond", "Nacht"], ["Stern", "Himmel"], ["Regen", "Tropfen"], ["Schnee", "K√§lte"],
    ["W√ºste", "Sand"], ["Tal", "Boden"], ["Vulkan", "Lava"], ["Insel", "Meer"], ["Ozean", "Weite"],
    ["Strand", "Muschel"], ["Wind", "Brise"], ["Nebel", "Feuchtigkeit"], ["Eis", "K√§lte"], ["Flamme", "Feuer"],
    ["Wasserfall", "H√∂he"], ["Gletscher", "Eis"], ["H√∂hle", "Dunkelheit"], ["Feld", "Ernte"], ["Busch", "Bl√§tter"],
    ["Ast", "Zweig"], ["Biene", "Honig"], ["Schmetterling", "Fl√ºgel"], ["Vogel", "Nest"], ["Reh", "Wald"],
    ["Pilz", "Wald"], ["Laub", "Herbst"], ["Saat", "Korn"], ["Frucht", "Baum"], ["Blatt", "Gr√ºn"],
    ["Fisch", "Wasser"], ["Koralle", "Meer"], ["M√∂we", "Strand"], ["Tanne", "Winter"], ["Eule", "Nacht"],
    ["Fuchs", "Wald"], ["Bergsee", "Spiegelung"], ["Hirsch", "Geweih"], ["Kiesel", "Strand"], ["Moos", "Feuchtigkeit"]
  ],
      sonstiges: [
    ["Auto", "Benzin"], ["Stra√üe", "Ampel"], ["Bus", "Haltestelle"], ["Zug", "Schiene"], ["Flugzeug", "Start"],
    ["Fahrrad", "Helm"], ["Supermarkt", "Einkaufswagen"], ["Restaurant", "Besteck"], ["Kaffee", "Bohne"], ["Arbeit", "B√ºro"],
    ["Lampe", "Licht"], ["Musik", "Kopfh√∂rer"], ["Handy", "Display"], ["Internet", "Browser"], ["Schl√ºssel", "Schloss"],
    ["K√ºche", "Herd"], ["Badezimmer", "Spiegel"], ["Garten", "Blume"], ["Briefkasten", "Post"], ["Geldb√∂rse", "M√ºnze"],
    ["Kino", "Leinwand"], ["Stadt", "H√§user"], ["Land", "Grenze"], ["Wald", "B√§ume"], ["Strand", "Sand"],
    ["Berg", "Gipfel"], ["See", "Boot"], ["Deutschland", "Berlin"], ["Frankreich", "Paris"], ["Italien", "Rom"],
    ["Japan", "Tokyo"], ["Kanada", "Ahorn"], ["USA", "Freiheit"], ["Schweiz", "Berge"], ["Schweden", "Winter"],
    ["Norwegen", "Fjord"], ["Regen", "Wolken"], ["Sonne", "Hitze"], ["Mond", "Nacht"], ["Stern", "Himmel"],
    ["Zeit", "Uhr"], ["Freundschaft", "L√§cheln"], ["Abenteuer", "Mut"], ["Wissen", "Buch"], ["Tr√§ume", "Schlaf"],
    ["Zukunft", "Plan"], ["Gl√ºck", "Zufall"], ["Magie", "Zauber"], ["Technik", "Fortschritt"], ["Natur", "Leben"]
  ],
      test: [
    ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"],
    ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], 
    ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"], ["Test", "Test1"]
  ],
      mix: [
    ["Chaos", "Zimmer"], ["Lachen", "Witz"], ["Regenschirm", "Tropfen"], ["Sandwich", "Picknick"], ["Kamera", "Erinnerung"],
    ["Fernsehen", "Abend"], ["Stau", "Auto"], ["Kalender", "Termin"], ["Kerze", "Feier"], ["Brille", "Sehen"],
    ["Uhr", "Sekunde"], ["Laptop", "Arbeit"], ["Kissen", "Schlaf"], ["Fahrrad", "Stra√üe"], ["Wolke", "Regen"],
    ["Post", "Brief"], ["Maske", "Gesicht"], ["Buch", "Kapitel"], ["Lampe", "Nacht"], ["Reise", "Koffer"],
    ["Treppen", "Stufen"], ["Zug", "Bahnhof"], ["Energie", "Kraftwerk"], ["Spiel", "Freizeit"], ["Zettel", "Notiz"],
    ["Kerze", "Duft"], ["Bus", "Ticket"], ["Zeitung", "Artikel"], ["Schl√ºssel", "T√ºr"], ["Handy", "Anruf"],
    ["Licht", "Schalter"], ["Br√ºcke", "Fluss"], ["Markt", "Obst"], ["Hemd", "Knopf"], ["Karte", "Weg"],
    ["Wolke", "Himmel"], ["Fenster", "Ausblick"], ["Stein", "Erinnerung"], ["Radio", "Musik"], ["Ufer", "See"],
    ["Park", "Bank"], ["Turm", "Aussicht"], ["Tasse", "Tee"], ["Ball", "Spiel"], ["Auto", "Reise"],
    ["Foto", "Erinnerung"], ["Film", "Abend"], ["Ticket", "Reise"], ["Stra√üe", "Ziel"], ["Buch", "Titel"]
  ]
    };
    let players = [], selectedWords = [];
    let usedWords = JSON.parse(localStorage.getItem("usedWords") || "[]");
    let currentIndex = 0, imposterIndex = [];
    let realWord = "", imposterHint = "", starter = "";
    let roundStartTime = 0, timerInterval;
    let points = JSON.parse(localStorage.getItem("points") || "{}");
    let playerCount = 4;
    let imposterCount = 1;
    let showHints = true;
    
    function changePlayerCount(n) {
      playerCount = Math.min(12, Math.max(3, playerCount + n));
      document.getElementById("playerCountDisplay").textContent = playerCount;
      updateNameInputs();
    }
    
    function changeImposterCount(n) {
      imposterCount = Math.min(3, Math.max(1, imposterCount + n));
      document.getElementById("imposterCountDisplay").textContent = imposterCount;
    }
    
    function updateNameInputs() {
      const container = document.getElementById("nameInputs");
      container.innerHTML = "";
      const saved = JSON.parse(localStorage.getItem("imposter_names") || "[]");
    
      for (let i = 0; i < playerCount; i++) {
        const input = document.createElement("input");
        input.placeholder = `Name Spieler ${i + 1}`;
        input.id = `player${i}`;
        input.value = saved[i] || "";
        container.appendChild(input);
      }
    }
    function toggleNames() {
      document.getElementById("nameInputsBox").classList.toggle("visible");
      document.getElementById("setup").classList.toggle("menu-open");    
    }
    function toggleCategoryMenu() {
      document.getElementById("categoryList").classList.toggle("visible");
      document.getElementById("setup").classList.toggle("menu-open");
    }
    
    function generateCategoryCheckboxes() {
      const container = document.getElementById("categoryList");
      container.innerHTML = `
        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
          <button type="button" onclick="selectAllCategories(true)" style="background:#4CAF50;width:48%;font-size:0.9em;">Alle ausw√§hlen</button>
          <button type="button" onclick="selectAllCategories(false)" style="background:#e53935;width:48%;font-size:0.9em;">Alle abw√§hlen</button>
        </div>
      `;
      for (let cat in wordPool) {
        const isChecked = cat !== "test";
        const label = document.createElement("label");
        label.innerHTML = `<span>${cat.charAt(0).toUpperCase() + cat.slice(1)}</span><input type="checkbox" value="${cat}" ${isChecked ? "checked" : ""}>`;
        container.appendChild(label);
      }
    }
    
    function selectAllCategories(selectAll) {
      document.querySelectorAll('#categoryList input[type="checkbox"]').forEach(cb => cb.checked = selectAll);
    }
    
    function startGame() {
      showHints = document.getElementById("hintSwitch").checked;
      players = [];
      for (let i = 0; i < playerCount; i++) {
        const name = document.getElementById(`player${i}`).value.trim();
        if (!name) return alert("Bitte alle Namen eingeben!");
        players.push(name);
        if (!points[name]) points[name] = 0;
      }
      localStorage.setItem("imposter_names", JSON.stringify(players));
      localStorage.setItem("points", JSON.stringify(points));
    
      const selectedCategories = [...document.querySelectorAll("#categoryList input:checked")].map(cb => cb.value);
      selectedWords = selectedCategories.flatMap(cat => wordPool[cat]);
    
      shuffle(players);
    
      const word = getRandomWord();
      realWord = word[0];
      imposterHint = word[1];
    
      imposterIndex = [];
      while (imposterIndex.length < imposterCount) {
        const rand = Math.floor(Math.random() * players.length);
        if (!imposterIndex.includes(rand)) imposterIndex.push(rand);
      }
    
      starter = players[Math.floor(Math.random() * players.length)];
      currentIndex = 0;
      roundStartTime = 0;
    
      document.getElementById("setup").style.display = "none";
      document.getElementById("game").style.display = "block";
      showPlayerCard();
    }
    
    function showPlayerCard() {
      document.getElementById("backToSetupBtn").style.display = "none";
      const player = players[currentIndex];
      document.getElementById("playerName").textContent = player;
      document.getElementById("statusText").textContent = "";
      document.getElementById("wordCard").textContent = "üóùÔ∏è Wort anzeigen...";
      document.getElementById("swipeCard").style.transform = "translate(-50%, -50%)";
      document.getElementById("cardContainer").style.display = "block";
    
      document.querySelectorAll("#game button").forEach(btn => btn.style.display = "none");
      document.getElementById("reveal").textContent = "";
      document.getElementById("timerDisplay").style.display = "none";
      setupSwipe();
    }
    
    function setupSwipe() {
      const swipeCard = document.getElementById("swipeCard");
      const wordCard = document.getElementById("wordCard");
    
      swipeCard.ontouchstart = null;
      swipeCard.ontouchmove = null;
      swipeCard.ontouchend = null;
    
      swipeCard.style.transition = "none";
      swipeCard.style.transform = "translate(-50%, -50%)";
      wordCard.textContent = "üóùÔ∏è Wort anzeigen...";
    
      let startY = 0, moved = false;
    
      swipeCard.ontouchstart = e => { startY = e.touches[0].clientY; moved = false; };
      swipeCard.ontouchmove = e => {
        const deltaY = startY - e.touches[0].clientY;
        if (deltaY > 0) {
          swipeCard.style.transition = "none";
          swipeCard.style.transform = `translate(-50%, calc(-50% - ${deltaY}px))`;
          moved = true;
          if (imposterIndex.includes(currentIndex)) {
            const others = imposterIndex.filter(i => i !== currentIndex).map(i => players[i]).join(", ");
            wordCard.innerHTML = `
              <div style="text-align:center;line-height:1.3em;">
                <strong>üòà Du bist der Imposter üòà</strong><br>
                ${showHints ? `Hinweis: ${imposterHint}<br>` : ""}
                ${others ? `<span>Andere Imposter: ${others}</span>` : ""}
              </div>`;
          } else {
            wordCard.textContent = `‚úÖ ${realWord}`;
          }
        }
      };
    
      swipeCard.ontouchend = () => {
        if (!moved) return;
        swipeCard.style.transition = "transform 0.4s cubic-bezier(0.25, 1.5, 0.5, 1)";
        swipeCard.style.transform = "translate(-50%, -50%)";
        if (currentIndex < players.length - 1) {
          document.getElementById("nextBtn").style.display = "block";
        } else {
          document.getElementById("startRoundBtn").style.display = "block";
        }
      };
    }
    
    function nextPlayer() {
      currentIndex++;
      showPlayerCard();
    }
    
    function showStarter() {
      document.getElementById("startRoundBtn").style.display = "none";
      document.getElementById("cardContainer").style.display = "none";
      document.getElementById("playerName").textContent = "";
      document.getElementById("statusText").innerHTML =
        `<span style="font-size:1.4em;">üé≤ <strong>${starter}</strong> beginnt die Runde!</span>`;
      document.getElementById("timerDisplay").style.display = "block";
      document.getElementById("timerDisplay").textContent = "‚è±Ô∏è Zeit: 00:00";
    
      roundStartTime = Date.now();
      clearInterval(timerInterval);
      timerInterval = setInterval(updateTimer, 1000);
      document.getElementById("revealImposterBtn").style.display = "block";
    }
    
    function updateTimer() {
      const t = Math.floor((Date.now() - roundStartTime) / 1000);
      const m = String(Math.floor(t / 60)).padStart(2, "0");
      const s = String(t % 60).padStart(2, "0");
      document.getElementById("timerDisplay").textContent = `‚è±Ô∏è Zeit: ${m}:${s}`;
    }
    
    function revealImposter() {
      clearInterval(timerInterval);
      document.getElementById("statusText").textContent = "";
      document.getElementById("timerDisplay").style.display = "none";
    
      const imposters = imposterIndex.map(i => players[i]).join(", ");
      const timePassed = Math.floor((Date.now() - roundStartTime) / 1000);
      const minutes = Math.floor(timePassed / 60);
      const seconds = timePassed % 60;
    
      document.getElementById("reveal").innerHTML = `
        <div style="display:flex;flex-direction:column;align-items:center;text-align:center;font-size:1.1em;line-height:1.2em;color:#000;">
          <span style="color:#b30000;font-weight:bold;">üòà Imposter: ${imposters}</span>
          ${showHints ? `<span>Hinweis: ${imposterHint}</span>` : ""}
          <span>Wort: ${realWord}</span>
          <span>Zeit: ${minutes} min ${seconds} sek</span>
        </div>
        <div id="roundScore" style="margin-top:6px;"></div>
      `;
      document.getElementById("revealImposterBtn").style.display = "none";
      document.getElementById("crewWinBtn").style.display = "block";
      document.getElementById("imposterWinBtn").style.display = "block";
    }
    
    function awardPoints(imposterWon) {
      if (imposterWon) imposterIndex.forEach(i => (points[players[i]] += 2));
      else players.forEach((p, i) => { if (!imposterIndex.includes(i)) points[p] += 1; });
      localStorage.setItem("points", JSON.stringify(points));
    
      localStorage.setItem("points", JSON.stringify(points));
      document.getElementById("roundScore").innerHTML = "";
    
      ["crewWinBtn","imposterWinBtn"].forEach(id => document.getElementById(id).style.display = "none");
      ["restartBtn","resetPointsBtn","backToSetupBtn"].forEach(id => document.getElementById(id).style.display = "block");
    }
    
    function resetPoints() {
      for (let p in points) points[p] = 0;
      localStorage.setItem("points", JSON.stringify(points));
      document.getElementById("reveal").textContent += `\n‚ùå Punkte gel√∂scht!`;
    }
    
    function startNewRound() {
      shuffle(players);
      const newImposters = [];
      while (newImposters.length < imposterCount) {
        const rand = Math.floor(Math.random() * players.length);
        if (!newImposters.includes(rand)) newImposters.push(rand);
      }
      imposterIndex = newImposters;
      starter = players[Math.floor(Math.random() * players.length)];
    
      const word = getRandomWord();
      realWord = word[0];
      imposterHint = word[1];
    
      currentIndex = 0;
      document.getElementById("statusText").innerHTML = `<span style="font-size:1.2em;font-weight:600;">üîÑ Neue Runde gestartet!</span>`;
      setTimeout(() => { document.getElementById("statusText").textContent = ""; }, 1200);
      showPlayerCard();
    }
    
    function goBackToSetupFromGame() {
      clearInterval(timerInterval);
      document.getElementById("game").style.display = "none";
      document.getElementById("setup").style.display = "block";
    }
    
    function getRandomWord() {
      let available = selectedWords.filter(w => !usedWords.includes(w[0]));
      if (available.length === 0) { usedWords = []; available = selectedWords; }
      const word = available[Math.floor(Math.random() * available.length)];
      usedWords.push(word[0]);
      return word;
    }
    
    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }
    
    window.onload = () => {
      generateCategoryCheckboxes();
      updateNameInputs();
    };
    
    function showScoreboard() {
      const scoreList = document.getElementById("scoreList");
      const pts = JSON.parse(localStorage.getItem("points") || "{}");
      const currentPlayers = JSON.parse(localStorage.getItem("imposter_names") || "[]");
      const filtered = Object.entries(pts).filter(([name]) => currentPlayers.includes(name));
    
      if (filtered.length === 0) {
        scoreList.innerHTML = "<p>üì≠ Noch keine Punkte vergeben!</p>";
      } else {
        const sorted = filtered.sort((a, b) => b[1] - a[1]);
        scoreList.innerHTML = sorted.map(([n, s]) => `<p><span>${n}</span><span>${s} Punkte</span></p>`).join("");
      }
    
      const delBtn = document.createElement("button");
      delBtn.textContent = "üóëÔ∏è Punkte l√∂schen";
      delBtn.classList.add("score-reset-btn");
      delBtn.onclick = () => {
        for (let p in pts) pts[p] = 0;
        localStorage.setItem("points", JSON.stringify(pts));
        showScoreboard();
      };
      scoreList.appendChild(delBtn);
    
      document.getElementById("setup").style.display = "none";
      document.getElementById("scoreboard").style.display = "flex";
    }
    
    function goBackToSetup() {
      document.getElementById("scoreboard").style.display = "none";
      document.getElementById("setup").style.display = "block";
    }
    </script>
</body>
</html>
 
