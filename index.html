<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Imposter Wortspiel ‚Äì Vollversion</title>
  <style>
    * { box-sizing: border-box; }
    html, body {
      user-select: none;
      margin: 0; padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #a1c4fd 0%, #c2e9fb 100%);
      height: 100%;
    }
    .card {
      background: #fdf5e6;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
      padding: 30px;
      max-width: 480px;
      margin: 30px auto;
      width: 90%;
      text-align: center;
    }
    input, button {
      margin: 6px auto; padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1em; width: 90%;
      display: block;
    }
    button {
      background: #4CAF50; color: white; cursor: pointer; transition: 0.2s;
    }
    button:hover { background: #45a049; }
    #playerControl {
      display: flex; justify-content: center; align-items: center; gap: 10px; margin: 10px 0;
    }
    #playerCountDisplay { font-weight: bold; font-size: 1.2em; }
    .checkboxes {
      display: none; margin-top: 10px;
      background: #ffffffa0; padding: 10px; border-radius: 15px; border: 1px solid #ccc;
    }
    .checkboxes.visible { display: block; }
    .checkboxes label {
      display: flex; align-items: center;
      margin: 5px 0; padding: 5px 10px; border-radius: 8px;
      background: #e9f1ff; box-shadow: inset 0 0 3px rgba(0,0,0,0.1);
    }
    .checkboxes input { margin-right: 10px; accent-color: #4CAF50; width: auto; }
    #cardContainer {
      position: relative; height: 220px; overflow: hidden; display: none;
    }
    #swipeCard, #wordCard {
      position: absolute; width: 100%; height: 100%;
      border-radius: 20px; display: flex; align-items: center; justify-content: center;
      text-align: center; padding: 20px; transition: transform 0.2s ease;
    }
    #swipeCard { background: linear-gradient(to bottom, #7f00ff, #e100ff); color: white; font-weight: bold; flex-direction: column; }
    #wordCard { background: #212121; color: #fff; z-index: 1; flex-direction: column; }
    #reveal { font-size: 1.2em; font-weight: bold; color: darkred; margin-top: 20px; white-space: pre-wrap; }
    #timerDisplay { font-size: 1.2em; color: #333; margin-top: 10px; display: none; }
    #resetPointsBtn { background: #777; width: 80%; margin-top: 20px; display: none; }
    #resetPointsBtn:hover { background: #555; }
  </style>
</head>
<body>
  <div class="card" id="setup">
    <h1>Imposter Wortspiel üïµÔ∏è‚Äç‚ôÇÔ∏è</h1>
    <button onclick="toggleCategoryMenu()">Kategorien √§ndern</button>
    <div class="checkboxes" id="categoryList"></div>
    <p>Wie viele Spieler?</p>
    <div id="playerControl">
      <button onclick="changePlayerCount(-1)">‚àí</button>
      <span id="playerCountDisplay">3</span>
      <button onclick="changePlayerCount(1)">+</button>
    </div>
    <div id="nameInputs" style="text-align:center;"></div>
  </div>

  <div class="card" id="game" style="display:none">
    <h2 id="playerName"></h2>
    <p id="statusText"></p>
    <p id="timerDisplay">‚è±Ô∏è Zeit: 00:00</p>
    <div id="cardContainer">
      <div id="wordCard">üóùÔ∏è Wort anzeigen...</div>
      <div id="swipeCard">üîí Wische nach oben üëÜ</div>
    </div>
    <button id="nextBtn" onclick="nextPlayer()">‚û°Ô∏è N√§chster Spieler</button>
    <button id="startRoundBtn" onclick="showStarter()">üé≤ Runde starten</button>
    <button id="revealImposterBtn" onclick="revealImposter()">üòà Imposter aufdecken</button>
    <button id="crewWinBtn" onclick="awardPoints(false)">‚úîÔ∏è Crew gewinnt</button>
    <button id="imposterWinBtn" onclick="awardPoints(true)">üòà Imposter gewinnt</button>
    <button id="restartBtn" onclick="startNewRound()">üîÅ Neue Runde</button>
    <div id="reveal"></div>
    <button id="resetPointsBtn" onclick="resetPoints()">üóëÔ∏è Punkte l√∂schen</button>
  </div>

  <script>
    /* üß† Wortpool einf√ºgen */
    const wordPool = {
      leicht: [["Ball","Leder"],["Haus","Dach"],["Auto","Verkehr"],["Buch","Seiten"],["Stuhl","Sitzen"]],
      sport: [["Fu√üball","Rasen"],["Basketball","Korb"],["Tennis","Aufschlag"],["Schwimmen","Bahn"],["Laufen","Tempo"]],
      schule: [["Tafel","Kreide"],["Lehrer","Klasse"],["Buch","Lesen"],["Sch√ºler","Pause"],["Heft","Blatt"]],
      technik: [["Computer","Prozessor"],["Handy","Display"],["Tablet","Touch"],["Fernseher","Bildschirm"],["Laptop","Tastatur"]],
      essen: [["Apfel","Baum"],["Banane","Schale"],["K√§se","Milch"],["Brot","Backofen"],["Pizza","Ofen"]],
      gefuehle: [["Freude","L√§cheln"],["Angst","Schatten"],["Wut","Rot"],["Trauer","Tr√§ne"],["Liebe","Herz"]],
      berufe: [["Arzt","Patient"],["Lehrer","Tafel"],["B√§cker","Ofen"],["Polizist","Uniform"],["Feuerwehrmann","L√∂schen"]],
      haustier: [["Hund","Leine"],["Katze","Schnurren"],["Hamster","Rad"],["Meerschweinchen","Pfeifen"],["Kaninchen","M√∂hre"]],
      saegetier: [["Elefant","R√ºssel"],["L√∂we","M√§hne"],["Tiger","Streifen"],["Pferd","Hufe"],["Kuh","Milch"]],
      hobbys: [["Lesen","Buch"],["Malen","Pinsel"],["Fotografie","Kamera"],["Kochen","Rezept"],["Backen","Teig"]],
      natur: [["Baum","Wald"],["Blume","Duft"],["Gras","Wiese"],["Berg","Gipfel"],["See","Wasser"]],
      sonstiges: [["Auto","Benzin"],["Stra√üe","Ampel"],["Bus","Haltestelle"],["Zug","Schiene"],["Flugzeug","Start"]],
      mix: [["Chaos","Zimmer"],["Lachen","Witz"],["Regenschirm","Tropfen"],["Sandwich","Picknick"],["Kamera","Erinnerung"]]
    };

    let players=[],usedWords=[],selectedWords=[];
    let currentIndex=0,imposterIndex=0;
    let realWord="",imposterHint="",starter="";
    let roundStartTime=0,timerInterval;
    let points=JSON.parse(localStorage.getItem("points")||"{}");
    let playerCount=3;

    function changePlayerCount(n){
      playerCount=Math.min(10,Math.max(3,playerCount+n));
      document.getElementById("playerCountDisplay").textContent=playerCount;
      updateNameInputs();
    }

    function updateNameInputs(){
      const c=document.getElementById("nameInputs");
      c.innerHTML="";
      const saved=JSON.parse(localStorage.getItem("imposter_names")||"[]");
      for(let i=0;i<playerCount;i++){
        const input=document.createElement("input");
        input.placeholder=`Name Spieler ${i+1}`;
        input.id=`player${i}`;
        input.value=saved[i]||"";
        c.appendChild(input);
      }
      const startBtn=document.createElement("button");
      startBtn.textContent="Spiel starten";
      startBtn.onclick=startGame;
      c.appendChild(startBtn);
    }

    function toggleCategoryMenu(){
      document.getElementById("categoryList").classList.toggle("visible");
    }

    function generateCategoryCheckboxes(){
      const c=document.getElementById("categoryList");
      c.innerHTML="";
      for(let cat in wordPool){
        const label=document.createElement("label");
        label.innerHTML=`<input type="checkbox" value="${cat}" checked> ${cat}`;
        c.appendChild(label);
      }
    }

    function startGame(){
      players=[];
      for(let i=0;i<playerCount;i++){
        const name=document.getElementById(`player${i}`).value.trim();
        if(!name)return alert("Bitte alle Namen eingeben!");
        players.push(name);
        if(!points[name])points[name]=0;
      }
      localStorage.setItem("imposter_names",JSON.stringify(players));
      localStorage.setItem("points",JSON.stringify(points));

      const cats=[...document.querySelectorAll("#categoryList input:checked")].map(c=>c.value);
      if(cats.length===0)return alert("Bitte mindestens eine Kategorie w√§hlen!");
      selectedWords=cats.flatMap(cat=>wordPool[cat]);
      shuffle(players);
      const w=getRandomWord();
      realWord=w[0]; imposterHint=w[1];
      imposterIndex=Math.floor(Math.random()*players.length);
      starter=players[Math.floor(Math.random()*players.length)];
      currentIndex=0; roundStartTime=0;
      document.getElementById("setup").style.display="none";
      document.getElementById("game").style.display="block";
      showPlayerCard();
    }

    function showPlayerCard(){
      const player=players[currentIndex];
      document.getElementById("playerName").textContent=player;
      document.getElementById("statusText").textContent="";
      document.getElementById("wordCard").textContent="üóùÔ∏è Wort anzeigen...";
      document.getElementById("swipeCard").style.transform="translateY(0)";
      document.getElementById("cardContainer").style.display="block";
      document.getElementById("nextBtn").style.display="none";
      document.getElementById("startRoundBtn").style.display="none";
      document.getElementById("revealImposterBtn").style.display="none";
      document.getElementById("crewWinBtn").style.display="none";
      document.getElementById("imposterWinBtn").style.display="none";
      document.getElementById("restartBtn").style.display="none";
      document.getElementById("resetPointsBtn").style.display="none";
      document.getElementById("reveal").textContent="";
      document.getElementById("timerDisplay").style.display="none";
      setupSwipe();
    }

    function setupSwipe(){
      const swipe=document.getElementById("swipeCard");
      const word=document.getElementById("wordCard");
      let startY=0,moved=false;
      swipe.ontouchstart=e=>{startY=e.touches[0].clientY;moved=false;};
      swipe.ontouchmove=e=>{
        const d=startY-e.touches[0].clientY;
        if(d>0){
          swipe.style.transition="none";
          swipe.style.transform=`translateY(-${d}px)`;
          word.textContent=currentIndex===imposterIndex?`üòà Du bist der Imposter! Hinweis: ${imposterHint}`:`‚úÖ ${realWord}`;
          moved=true;
        }
      };
      swipe.ontouchend=()=>{
        if(!moved)return;
        swipe.style.transition="transform 0.2s ease";
        swipe.style.transform="translateY(0)";
        if(currentIndex<players.length-1)document.getElementById("nextBtn").style.display="block";
        else{document.getElementById("nextBtn").style.display="none";document.getElementById("startRoundBtn").style.display="block";}
      };
    }

    function nextPlayer(){currentIndex++;showPlayerCard();}

    function showStarter(){
      document.getElementById("cardContainer").style.display="none";
      document.getElementById("playerName").textContent="";
      document.getElementById("startRoundBtn").style.display="none";
      document.getElementById("statusText").textContent=`üé≤ ${starter} beginnt die Runde!`;
      document.getElementById("timerDisplay").style.display="block";
      roundStartTime=Date.now();clearInterval(timerInterval);
      timerInterval=setInterval(updateTimer,1000);
      document.getElementById("revealImposterBtn").style.display="block";
    }

    function updateTimer(){
      const t=Math.floor((Date.now()-roundStartTime)/1000);
      const min=String(Math.floor(t/60)).padStart(2,'0');
      const sec=String(t%60).padStart(2,'0');
      document.getElementById("timerDisplay").textContent=`‚è±Ô∏è Zeit: ${min}:${sec}`;
    }

    function revealImposter(){
      clearInterval(timerInterval);
      document.getElementById("statusText").textContent="";
      document.getElementById("timerDisplay").style.display="none";
      const imp=players[imposterIndex];
      const elapsed=Math.floor((Date.now()-roundStartTime)/1000);
      const min=Math.floor(elapsed/60);
      const sec=elapsed%60;
      document.getElementById("reveal").textContent=`üòà Imposter: ${imp}\nWort: ${realWord}\nZeit: ${min} min ${sec} sek`;
      document.getElementById("revealImposterBtn").style.display="none";
      document.getElementById("crewWinBtn").style.display="block";
      document.getElementById("imposterWinBtn").style.display="block";
    }

    function awardPoints(imposterWon){
      if(imposterWon)points[players[imposterIndex]]+=2;
      else players.forEach((p,i)=>{if(i!==imposterIndex)points[p]+=1;});
      localStorage.setItem("points",JSON.stringify(points));
      let txt="üèÜ Punktestand:\n";
      for(let p in points)txt+=`${p}: ${points[p]} Punkte\n`;
      document.getElementById("reveal").textContent+=`\n\n${txt}`;
      document.getElementById("crewWinBtn").style.display="none";
      document.getElementById("imposterWinBtn").style.display="none";
      document.getElementById("restartBtn").style.display="block";
      document.getElementById("resetPointsBtn").style.display="block";
    }

    function resetPoints(){
      for(let p in points)points[p]=0;
      localStorage.setItem("points",JSON.stringify(points));
      document.getElementById("reveal").textContent+="\n‚ùå Punkte gel√∂scht!";
      document.getElementById("resetPointsBtn").style.display="none";
    }

    function startNewRound(){
      document.getElementById("reveal").textContent="";
      document.getElementById("restartBtn").style.display="none";
      const w=getRandomWord();
      realWord=w[0];imposterHint=w[1];
      imposterIndex=Math.floor(Math.random()*players.length);
      starter=players[Math.floor(Math.random()*players.length)];
      currentIndex=0;
      showPlayerCard();
    }

    function getRandomWord(){
      let available=selectedWords.filter(w=>!usedWords.includes(w[0]));
      if(available.length===0){usedWords=[];available=selectedWords;}
      const w=available[Math.floor(Math.random()*available.length)];
      usedWords.push(w[0]);
      return w;
    }

    function shuffle(a){
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
    }

    generateCategoryCheckboxes();
    updateNameInputs();
  </script>
</body>
</html>


